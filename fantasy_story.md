# Fantasy Story Generator PRD v0.1

## 0. 文档信息

- **项目名称**：奇幻故事生成器（Fantasy Story Generator）
- **所属产品**：AI 写作空间 / aistory
- **文档版本**：v0.1
- **文档目的**：
  - 基于“fantasy story generator”关键词的市场与竞品调研，明确奇幻故事生成器的产品定位、用户需求、功能范围与 MVP 规划。
  - 作为产品设计、交互设计与技术实现的依据，后续可拆分为需求任务与开发任务。
- **状态**：草案 / 待迭代

---

## 1. 产品概述

### 1.1 背景

- 现有项目 aistory：偏「多工具生成器」形态（故事、同人、诗歌、书名、情节等），通过多步表单 + 一键生成结果。
- 搜索关键词 “fantasy story generator” 的外网工具普遍形态：
  - 单次生成奇幻故事或奇幻故事大纲。
  - 多数为英文工具，以高魔/中世纪西方奇幻为主。
  - 主要诉求是：快速激发灵感、克服写作瓶颈，而不是构建复杂世界观。
- aistory 与「AI 写作空间」新项目希望在「长篇创作、世界观一致性、多语言」方面做更专业的支持：
  - 需要一个**专门针对奇幻题材**的故事生成入口，既能一键出稿，又能为后续长篇创作提供世界观和角色基础。

### 1.2 新功能愿景

- 提供一个面向奇幻题材的专用生成器，让用户可以：
  - 从一句话想法快速生成可读的奇幻短篇故事。
  - 通过「世界观向导」的方式，结构化输入子类型、世界背景、魔法系统、角色和主线剧情，由 AI 生成世界观说明、角色设定卡、剧情大纲和首章正文。
  - 将生成结果直接用于 AI 写作空间中，作为长篇创作的起点。

### 1.3 与现有 aistory 模块的关系

- **Story / Plot / Fanfic / Book Title 等生成器**：
  - 更偏通用/多题材、单次生成。
- **奇幻故事生成器（本 PRD）**：
  - 针对奇幻题材（含东方玄幻/仙侠等）的垂直场景。
  - 更强调世界观与设定的一致性，以及与长篇创作工作流的衔接。
  - 可作为 Story / Plot 等模块上游的“设定+大纲生成器”。

---

## 2. 目标用户与使用场景

### 2.1 写作爱好者 / 轻度创作者

- **画像**
  - 偏兴趣向，喜欢奇幻题材（龙、魔法、王国、冒险等），有写故事冲动但写作经验有限。
  - 多在社交媒体、小站发布短篇，或写给朋友/自己看。
- **典型场景**
  - 想写一篇奇幻小故事，但只有一个模糊想法（例如“一个不会魔法的王子拯救世界”）。
  - 希望 AI 给出一个完整的故事或至少是一个有起承转合的短篇。

### 2.2 网络小说作者 / 网文作者

- **画像**
  - 有一定写作经验，在番茄、起点等平台连载，偏玄幻/仙侠/西幻等。
  - 需要大量世界观、角色和剧情点子，用于新坑/新系列。
- **典型场景**
  - 为新书找「世界观 + 设定 + 主线大纲」的起点。
  - 希望在既定子类型（如东方玄幻、仙侠、都市奇幻）下，快速得到：
    - 世界观架构（势力/地理/时代）。
    - 魔法/修真体系的规则与限制。
    - 主角与反派的人设与冲突。
    - 多卷/多章的剧情骨架。

### 2.3 RPG / 跑团 DM / 桌游主持人

- **画像**
  - TRPG / DND / 跑团主持人，需要大量世界设定、任务线、NPC 与剧情分支。
- **典型场景**
  - 希望快速获得一个奇幻世界的基本设定 + 多条任务线。
  - 使用生成的大纲与设定，作为线下/线上跑团的素材基础。

### 2.4 学生 / 教师（创意写作场景）

- **画像**
  - 老师需要课堂练习素材，学生需要奇幻作文/故事练习的起点。
- **典型场景**
  - 教师用生成器产出示范文本或创作题目。
  - 学生在 AI 提供的开头/设定基础上继续写，锻炼表达与想象力。

### 2.5 内容创作者（视频/图文博主）

- **画像**
  - 短视频脚本作者、B 站/抖音/小红书博主。
- **典型场景**
  - 需要很多奇幻脑洞作为短视频剧情/图文长图内容素材。
  - 希望快速生成：故事梗概、角色设定卡、世界观介绍等。

---

## 3. 核心用户需求（基于外网竞品调研）

- **需求 1：一键获得可读的奇幻故事**
  - 能从一句话想法、简单设定快速生成完整的故事。
  - 适合作为阅读、分享或二次改写的起点。

- **需求 2：世界观与设定的结构化支持**
  - 不是只要一段「看起来像奇幻」的文字，而是：
    - 有清晰的世界背景：时代、地理、势力。
    - 有内在逻辑的魔法/能力系统。
    - 有立得住的人物设定与动机。

- **需求 3：写作控制感**
  - 用户希望能指定：
    - 子类型（高魔、都市奇幻、东方玄幻、仙侠等）。
    - 故事基调（搞笑、黑暗、史诗、治愈等）。
    - 目标受众与篇幅（儿童/青少年/成人、短篇/中篇/仅大纲）。

- **需求 4：多样化输出形态**
  - 不仅是「一篇故事」，还包括：
    - 剧情大纲（按幕/章节）。
    - 角色卡片（人物设定）。
    - 世界观设定文档。
    - 魔法系统说明。
    - 提示词/创意点子集合。

- **需求 5：低门槛但可深度控制**
  - 对新手：提供「极简表单 + 一键生成」。
  - 对进阶用户：提供更细的字段（世界背景、魔法系统、剧情反转等），可获得高一致性的复杂世界。

- **需求 6：与后续创作的衔接**
  - 能把生成的设定和大纲带入后续的写作工具中。
  - 能在同一世界观下，多次生成不同故事/章节，保持设定一致。

---

## 4. 竞品分析（摘要）

> 以下内容为高层总结，详细竞品页面见调研原始记录（可另存）。

### 4.1 Toolbaz Fantasy Story Generator

- **输入方式**：
  - 自由文本指令（故事说明、角色或场景）。
  - 创造力等级 1–10（类似模型温度）。
- **输出**：
  - 一篇完整的奇幻故事文本。
  - 支持导出 TXT / DOC / HTML。
- **优势/特点**：
  - 入口简单，几步即可生成，主打「免费 / 无需登录 / 无限使用」。
  - 偏「魔法故事机」，满足即时娱乐与灵感激发。

### 4.2 Squibler – AI Fantasy Story Generator

- **定位**：
  - 完整写作平台的一部分（书籍/小说/剧本等），奇幻只是其中一个 Genre。
- **功能特征**：
  - 基于用户输入的魔法系统、世界观元素、角色原型和剧情方向，生成：
    - 沉浸式的奇幻故事。
    - 书籍大纲/章节结构。
  - 支持生成后在编辑器中继续写、扩写整本书。
- **卖点**：
  - 解决写作瓶颈，帮助构建完整结构与设定，适合长篇创作。

### 4.3 BasedLabs – Fantasy Story Generator

- **交互流程**（三步向导）：
  - Describe Your Idea：输入角色/场景/主题，粗细皆可。
  - Generate Fantasy Worlds：生成故事大纲和世界设定。
  - Expand and Customize：用户在结果基础上自行扩写/微调。
- **卖点**：
  - 强调从模糊想法到动态故事的过渡。
  - 支持对故事进行个性化修改与风格调整。

### 4.4 GenerateStory – Fantasy Story Generator

- **结构化输入非常清晰，可作为产品表单设计参考**：
  - Step 1：选择子类型（Subgenre）。
  - Step 2：描述故事背景（Setting）。
  - Step 3：主前提（Main Premise）。
  - Step 4：剧情反转（Plot Twists）。
  - Step 5：人物设定（Characters）。
  - Step 6：生成完整故事（整合前述信息）。
- **卖点**：
  - 强调世界观一致性、魔法系统逻辑自洽、符合子类型惯例。
  - 同时提供 FAQ：是否可商用、生成完整故事还是仅创意等。

### 4.5 Musely – AI Fantasy Story Generator

- **使用步骤**：
  - Define Your Vision：初始故事概念 + 主题 + 主角 + 基调。
  - Customize Details：魔法元素、目标受众、长度、场景等。
  - Generate Your Story：生成故事或剧情创意。
- **输出类型**：
  - Plot outlines（剧情大纲）、Character concepts（角色概念）、World-building details（世界观细节）、Magic systems、Story prompts、Short narratives（短篇）。
- **卖点**：
  - 输出形态多样，覆盖从设定到短文的多个层次。

---

## 5. 产品定位与价值主张

- **一句话定位**
  - 「面向奇幻/玄幻创作者的世界观驱动型故事生成器，让你在一个入口里完成从子类型选择、世界设定到故事大纲与首章生成。」

- **核心价值**
  - **奇幻垂直深度**：相比通用故事生成器，提供更细的子类型划分（特别加强东方玄幻/仙侠），内置常见套路与结构模板。
  - **世界观工程化**：以结构化表单采集世界观、魔法体系、角色与剧情要素，为后续长篇创作提供“故事圣经”级别的基础。
  - **连载一致性**：与 AI 写作空间的设定库/摘要机制结合，支持在同一世界观下持续生成多章节，尽量保持设定一致。
  - **多语言潜力**：在后续可扩展为中英双语奇幻工具，支持中文玄幻世界 + 英文面向海外读者的版本。

---

## 6. 信息架构与入口设计

### 6.1 IA 位置

- 所属：
  - aistory / AI 写作空间的「故事 / 小说」类模板下。
- 入口建议：
  - 官网/登录后首页的「生成器」列表中增加「奇幻故事生成器」。
  - 模板中心增加「奇幻故事」专题，入口跳转到本功能页面。

### 6.2 页面结构（单页）

- **基础结构**（与现有生成器保持一致风格，仅为需求说明）：
  - 顶部：标题 + 功能简介 + 使用说明链接。
  - 中间：
    - 左侧/上方：参数表单（支持切换模式 Tab）。
    - 右侧/下方：生成结果区（支持多 Tab 展示不同输出块）。
  - 底部：注意事项（内容免责声明、版权说明等）。

- **模式 Tab（建议）**：
  - 「快速模式」：快速生成奇幻短篇，参数较少。
  - 「世界观向导模式」：多步骤表单，生成世界观 + 大纲 + 正文片段。

---

## 7. 功能设计

### 7.1 模式一：快速生成模式

- **目标**
  - 针对想快速获得一篇奇幻故事的用户，提供低门槛、一键化体验。

- **输入字段（示例）**

| 字段名           | 类型         | 是否必填 | 示例/枚举                                  | 说明 |
|------------------|--------------|----------|-------------------------------------------|------|
| 故事想法（Prompt） | 多行文本     | 是       | “一个不会魔法的王子必须拯救王国”          | 用户自然语言描述故事大意或开头。 |
| 子类型（Subgenre）| 下拉选择     | 否（有默认） | 高魔奇幻 / 都市奇幻 / 东方玄幻 / 仙侠 / 黑暗奇幻 / 搞笑奇幻 / 蒸汽朋克 等 | 影响世界观与套路。 |
| 故事基调（Tone） | 下拉选择     | 否       | 轻松 / 治愈 / 史诗 / 黑暗 / 悲剧 / 热血    | 决定叙事情绪。 |
| 目标受众         | 下拉选择     | 否       | 儿童 / 青少年 / 成人                       | 影响语言复杂度和内容尺度。 |
| 篇幅长度         | 下拉或滑块   | 否       | 仅开头片段 / 短篇（约 1–2k 字）/ 中篇大纲 | 控制生成长度。 |
| 叙事视角         | 下拉选择     | 否       | 第一人称 / 第三人称有限 / 全知视角         | 可选，默认第三人称有限。 |

- **输出内容**
  - 默认展示「故事正文」块。
  - 可选附带：简要剧情大纲（1–2 级标题）。

- **交互行为**
  - 点击「生成」：
    - 在结果区显示加载状态。
    - 生成完成后展示正文 + 大纲。
  - 支持：
    - 再生成（基于同一参数）
    - 微调：改变子类型/基调后重新生成。

### 7.2 模式二：世界观向导模式

- **目标**
  - 帮助有一定写作基础的用户，构建完整的奇幻世界观与故事骨架，为长篇创作打基础。

- **步骤 & 字段设计（示例）**

1. **Step 1：选择子类型**
   - 字段：子类型（必填，下拉）。
   - 说明：决定叙事惯例和世界规则基础，不同子类型可加载不同模板提示文案。

2. **Step 2：世界背景（Setting）**
   - 字段：时代（中世纪 / 近代 / 现代 / 未来 / 架空混合）。
   - 字段：世界概况（多行文本）：地理、气候、主要文明。
   - 字段：主要势力（多行文本）：帝国/王国/公会/宗门/教会等。

3. **Step 3：魔法 / 能力系统**
   - 字段：来源（下拉 + 可补充文本）：天赋 / 血统 / 修炼 / 契约 / 科技 / 神赐等。
   - 字段：代价（文本）：使用魔法要付出的代价（生命、记忆、理智、寿命、身体损伤等）。
   - 字段：限制（文本）：施法条件、资源限制、禁忌规则等。

4. **Step 4：角色设定（Characters）**
   - 字段：主角设定：
     - 姓名/代称。
     - 种族/职业（如人类法师、龙族、半精灵游侠、凡人王子、修真者等）。
     - 性格关键词。
     - 背景与缺点。
     - 目标与动力。
   - 字段：主要对立角色/反派设定：
     - 目标、动机、与主角的关系。

5. **Step 5：剧情与反转（Plot）**
   - 字段：主线任务（文本）：如寻找神器、打破诅咒、阻止战争等。
   - 字段：关键节点（可选）：开端、转折、中点、大高潮、结局方向。
   - 字段：预设反转（文本，可多条）：如“导师其实是反派”“王国的神是人工制造”等。

6. **Step 6：生成结果**
   - 基于上述所有字段，生成：
     - 世界观说明文。
     - 角色设定卡片（主角 + 反派）。
     - 按卷/章节的剧情大纲（可简单到 1 层，也可扩展为 2 层）。
     - 第一章或开篇片段的故事正文。

- **输出结构（前端以 Tab 或折叠块呈现）**
  - Tab 1：世界观设定。
  - Tab 2：角色设定。
  - Tab 3：剧情大纲。
  - Tab 4：故事正文。

- **后续操作**
  - 「发送到写作空间」：
    - 将世界观/角色/大纲写入对应作品的设定库/摘要系统。
    - 在 AI 写作空间中新建作品，并将第一章正文写入编辑器。
  - 「继续生成下一章」：基于当前世界观和大纲，生成后续章节草稿。

### 7.3 通用参数与高级选项

- **创造力 / 随机性控制**
  - 提供简单滑块（例如：严谨 / 平衡 / 发散）映射到模型温度、top_p 等参数。

- **内容安全与风格限制**
  - 对少儿/青少年受众时，限制血腥/暴力/色情内容。
  - 对「黑暗/悲剧」基调仍需遵守平台内容安全策略。

---

## 8. 与现有系统的联动设计（高层）

- **与 AI 写作空间的协同**
  - 将奇幻生成器的输出作为「作品初始化」的一部分：
    - 自动创建作品条目。
    - 将世界观/角色/关键事实写入设定库模块。
    - 将剧情大纲写入作品大纲结构。
    - 将正文片段写入第一章草稿。

- **与其他生成器的桥接**
  - 一键调用 Book Title Generator 为该奇幻故事生成书名与副标题。
  - 一键调用 Plot Generator 对剧情大纲做二次优化或拆分更多支线。
  - 一键调用 Poem/Prompt 工具生成与该世界观相关的诗歌、宣传语、文案。

---

## 9. 技术与实现要点（高层）

> 这里只做产品视角的技术注意点，具体由技术方案文档展开。

- **Prompt 结构**
  - 为快速模式和世界观模式分别设计 Prompt 模板。
  - 世界观模式需要以结构化方式组织设定信息，避免超长但又保持必要细节。

- **一致性与可重用性**
  - 建议复用 AI 写作空间中已有的「分层摘要」「设定库（Story Bible）」技术思路：
    - 初次生成世界观与大纲时就创建基础设定条目。
    - 后续章节生成时，自动引用这些设定，减少设定前后矛盾。

- **多语言扩展能力**
  - 初期可仅支持中文奇幻故事。
  - 后续可考虑：
    - 在同一世界观下，生成英文版本的世界观简介和故事正文。
    - 用于面向海外读者的奇幻作品创作。

- **成本与性能**
  - 世界观模式一次调用可能包含较长上下文，需控制字段长度与摘要方式。
  - 对「重型操作」（例如生成长篇大纲）可采用异步任务与进度提示。

---

## 10. MVP 范围（建议）

### 10.1 MVP 目标

- 在较短周期内上线可用的奇幻故事生成器，以验证用户兴趣和使用模式。

### 10.2 MVP 必须包含

- **基础结构**
  - 单页奇幻生成器入口。
  - 快速模式：基本参数 + 一键生成短篇故事。

- **最小世界观模式**
  - 精简版多步骤表单：子类型 + 世界背景 + 主角 + 主线任务。
  - 输出：简化世界观说明 + 简要大纲 + 开篇片段。

- **基本联动**
  - 将生成结果保存为某个作品的初始草稿（即便先只做简单文本保存）。

### 10.3 MVP 暂不包含 / 弱化部分

- 复杂的多卷多章大纲生成。
- 完整的设定库结构化存储与可视化编辑（可先用纯文本形式）。
- 多语言生成与双语世界观输出。
- 与所有其他生成器的深度桥接（可后续补充按钮）。

---

## 11. 风险与注意事项

- **内容风险与伦理问题**
  - 奇幻故事可能涉及暴力、宗教、政治等敏感元素，需要在 Prompt 与内容审核上做约束。
  - 避免提供明显侵权导向的功能（如直接模仿某知名 IP 的世界观与风格）。

- **生成质量与用户预期管理**
  - 对外文案需明确：本工具为创作辅助工具而非专业代写。
  - 在 UI 中鼓励用户对生成内容进行二次修改与个性化创作。

- **上下文长度与调用成本**
  - 世界观向导模式的输入字段较多，需要在表单设计上限制每项字数，以控制 token 成本。

- **与主产品的边界**
  - 需要明确：奇幻故事生成器是「入口工具」还是「写作空间内的一个模板」：
    - 若作为入口工具，重点在于一次性生成和导出。
    - 若作为写作空间模板，则重点在于与设定库、大纲、版本管理的深度协同。

---

## 12. 开发任务列表（按模块）

> 说明：以下任务以「MVP 优先」为主，后续迭代任务可在首版上线后再排期。

### 12.1 前端（Web）

- **页面与路由**（MVP）
  - 新增「奇幻故事生成器」页面路由与导航入口：
    - 在生成器列表/模板中心增加入口卡片（与现有生成器样式一致）。
    - 路由路径约定（示例）：`/generate/fantasy-story`（实际以现有路由规范为准）。

- **基础页面框架**（MVP）
  - 搭建单页布局结构：标题区 + 表单区 + 结果区。
  - 复用现有通用组件（布局、卡片、按钮、表单控件等），非必要不新增重复组件。

- **快速模式表单 UI**（MVP）
  - 实现快速模式 Tab：
    - 字段：故事想法、子类型、故事基调、目标受众、篇幅长度、叙事视角。
    - 使用已有 `Select`、`Textarea`、`Slider` 等组件；保持与其他生成器一致的交互和校验样式。
  - 表单校验：
    - 故事想法必填，限制最小/最大字数。
    - 其他字段有默认值，可选填。

- **世界观向导模式 UI**（MVP 精简版）
  - 实现模式 Tab 切换（快速模式 / 世界观向导模式）。
  - 世界观向导模式：先实现精简版步骤（子类型 + 世界背景 + 主角 + 主线任务）。
    - 使用 Stepper/分步表单交互（如已有组件可复用）。
    - 每步的字段输入控件与占位文案按 PRD 字段说明实现。

- **结果展示区**（MVP）
  - 结果区支持多块展示：
    - 快速模式：故事正文 + 可选剧情大纲。
    - 世界观模式：世界观设定 / 角色设定 / 剧情大纲 / 正文片段（可先用折叠块或简单标题分段）。
  - 支持 Loading 状态、错误提示、重试按钮。

- **交互与状态管理**（MVP）
  - 选择参数 → 点击「生成」→ 禁用按钮 + Loading → 显示结果。
  - 支持「再次生成」与「修改参数后重新生成」，注意避免并发多次请求导致 UI 乱序。

- **与写作空间的跳转按钮**（MVP）
  - 在世界观模式结果区提供「发送到写作空间」按钮：
    - 点击后调用后端接口创建作品，并跳转到 AI 写作空间的对应编辑页面。
    - 跳转携带作品 ID 等必要参数。

- **后续迭代（前端）**
  - 完整世界观向导模式（增加魔法系统、反派、反转等更多步骤与字段）。
  - 结果区按 Tab 样式拆分为：世界观/角色/大纲/正文多标签切换。
  - 将当前表单参数保存为「模板」，下次一键复用。

### 12.2 后端 & API 网关

- **API 设计与路由**（MVP）
  - 设计奇幻生成接口：
    - `POST /api/fantasy-story/quick-generate`：快速模式。
    - `POST /api/fantasy-story/worldbuilder-generate`：世界观向导模式（精简版）。
  - 定义请求/响应数据结构：
    - 请求体字段与前端表单字段一一对应，必要字段做服务端校验。
    - 响应体包含：故事正文、大纲、世界观设定、角色设定等可选字段（部分字段在快速模式可为空）。

- **权限与配额控制**（MVP）
  - 与现有项目的用户体系/配额体系对齐：
    - 仅登录用户可调用或按照现有策略处理未登录态。
    - 每日调用次数/Token 消耗统计复用现有逻辑，无需在此功能单独实现计费逻辑。

- **与 AI 网关集成**（MVP）
  - 在后端服务中调用统一的 AI 网关：
    - 不直接在前端调用模型，所有 Prompt 组装与调用走后端网关。
    - 将快速模式与世界观模式的 Prompt 模板封装为可配置结构，便于后续调优。

- **作品初始化接口**（MVP）
  - 新增接口：`POST /api/fantasy-story/create-work-from-generation`：
    - 入参：本次生成的世界观设定、角色设定、剧情大纲、正文片段，以及用户 ID。
    - 行为：
      - 创建一条新作品记录（作品类型=奇幻/小说）。
      - 初始化作品的章节/大纲结构（最少创建第一章）。
      - 将正文写入第一章内容。
      - 预留钩子：将设定文本写入后续的设定库/摘要模块（可先仅存文本字段）。

- **日志与监控**（MVP）
  - 为奇幻生成接口增加基础日志：
    - 请求参数摘要（不记录全文，避免日志敏感信息泄露）。
    - 调用模型耗时与失败率。
  - 接入现有监控/告警系统，方便排查问题。

- **后续迭代（后端）**
  - 深度集成设定库（Story Bible）：将世界观/角色/事实拆分为结构化条目。
  - 为同一世界观提供多次章节生成时的一致性支持（复用摘要与设定库）。
  - 支持多语言版本生成（例如：同一世界观生成中/英两个版本）。

### 12.3 AI / Prompt 设计

- **Prompt 模板设计（MVP）**
  - 为快速模式设计基础 Prompt：
    - 包含：子类型、基调、受众、篇幅、叙事视角、故事想法。
    - 输出：一篇有起承转合的奇幻短篇故事 + 简要剧情大纲（可选）。
  - 为精简世界观模式设计 Prompt：
    - 输入：子类型、世界背景、主角设定、主线任务。
    - 输出：
      - 世界观说明（短版）。
      - 主角人物卡简要说明。
      - 1–2 层级的剧情大纲。
      - 第一章/开篇片段文本。

- **模型选择与参数配置（MVP）**
  - 根据当前项目统一选择合适的基础模型（遵循已有 AI 网关策略）。
  - 为奇幻故事生成设置默认温度/top_p 等参数，并暴露一个「创造力等级」映射逻辑给前端。

- **质量调优与示例库（可与 MVP 并行）**
  - 收集若干奇幻故事/设定示例作为 Prompt 中的 few-shot 样例（注意版权与来源）。
  - 调整 Prompt 结构以控制长度、风格与节奏，尤其要避免：
    - 过度堆砌世界设定导致故事不可读。
    - 情节虎头蛇尾或完全不收束。

- **后续迭代（AI/Prompt）**
  - 为不同子类型（东方玄幻、仙侠、都市奇幻等）设计差异化 Prompt 片段或模板。
  - 根据用户反馈逐步优化不同模式下的 Prompt 与输出结构。

### 12.4 与 AI 写作空间的联动实现

- **作品模型扩展（MVP）
  - 在作品模型中（若尚未有）增加字段：作品类型/题材标签（如 fantasy / 玄幻 / 仙侠）。
  - 「从奇幻生成器创建的作品」自动打上对应标签，便于后续过滤与模板推荐。

- **跳转与初始化逻辑（MVP）**
  - 从奇幻生成器点击「发送到写作空间」时：
    - 前端调用后端作品初始化接口。
    - 后端返回作品 ID、初始章节信息。
    - 前端路由跳转到 AI 写作空间的编辑器页，并高亮世界观/大纲区域（如有）。

- **后续迭代（联动）**
  - 自动为作品创建「设定」侧边栏内容（世界观、角色卡等），并支持在编辑器内查看/编辑。
  - 从编辑器反向调用奇幻生成器：在同一世界观下生成新支线/新章节。

### 12.5 测试与质量保障

- **单元测试 / 集成测试（MVP）**
  - 前端：
    - 表单校验逻辑测试（必填/选填、长度限制等）。
    - 关键交互（生成按钮、Loading 状态、错误提示）行为测试。
  - 后端：
    - 请求体校验测试（非法参数、缺失字段）。
    - AI 网关调用失败/超时的错误处理测试。
    - 作品初始化接口的基本流程测试（创建作品 + 写入正文）。

- **手动探索测试（MVP）
  - 覆盖不同子类型、受众、篇幅的组合，观察生成质量与性能。
  - 特别关注：
    - 中文奇幻/玄幻场景下的名称与用语是否自然。
    - 对儿童/青少年受众时的内容尺度。

- **后续迭代（测试）**
  - 引入基础的「生成质量标注」能力（内部使用），用于记录问题样本回流优化 Prompt。

### 12.6 上线与运营支持

- **灰度发布计划（MVP）**
  - 先在内部或少量用户中灰度开放奇幻生成器入口。
  - 监控：请求量、失败率、平均耗时、用户停留时间与转化到写作空间的比例。

- **埋点与分析（MVP）**
  - 埋点内容包括：
    - 进入奇幻生成器页面的用户数与来源。
    - 生成按钮点击次数、成功/失败数。
    - 使用快速模式 vs 世界观模式的比例。
    - 从奇幻生成器跳转到写作空间创建作品的次数。

- **后续运营支持**
  - 在官网/产品内增加奇幻生成器的使用示例与教程。
  - 收集高质量用户案例，用于后续优化模板与营销。
